<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carimbo Rede Externa - TX/RX F√≠sica</title>
  <style>
   * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
.form-container {
  background: #e6e5e5;
  width: 100%;               /* faz o container ocupar toda a largura dispon√≠vel */
  max-width: 700px;
  margin: 40px auto;
  padding: 0 30px 30px 30px;
  border: 1px solid #000000;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}


/* Estilo aplicado somente ao h2 dentro de .form-container */
.form-container > h2 {
  background-color: #23659c;
  color: #000;
  padding: 50px 20px;
  border-radius: 10px 10px 0 0;
  text-align: center;
  font-family: monospace;
  font-size: 24px;
  margin: 0 -30px 25px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
    

label i {
  margin-right: 6px;
  color: #333;
}


    h2, h3 {
      text-align: center;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 8px;
      font-family: monospace;
      margin-top: 5px;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
    }
 button {
  padding: 8px 20px;
  background: linear-gradient(145deg, #f8f6f6, #a09797); /* prata/chumbo leve */
  color: #222;
  border: 2px solid #767474;
  border-radius: 12px;
  font-weight: bold;
  font-family: monospace;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
}

button:active {
  transform: translateY(0);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}


    .btn-selecao {
      padding: 12px 24px;
      margin: 5px;
      border: 2px solid #7676cb;
      border-radius: 30px;
      background: linear-gradient(135deg, #84b5dd, #3785c4);
      color: #000;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
      font-family: monospace;
      user-select: none;
    }
    .btn-selecao:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
    }
    .btn-selecao.active {
      background: linear-gradient(135deg, #90caf9, #42a5f5);
      box-shadow: 0 0 0 3px #64b5f6;
      color: #000;
    }
    .checkboxes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .checkboxes label {
      font-weight: normal;
      cursor: pointer;
    }
    .dupla {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .dupla > div {
      flex: 1;
    }
    .seletor-potencia {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 4px;
}

.seletor-potencia button {
  padding: 4px 8px;
  font-size: 14px;
  border: 1px solid #666;
  background: linear-gradient(to bottom, #ccc, #999);
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
}

.seletor-potencia span {
  min-width: 70px;
  text-align: center;
  font-family: monospace;
  font-weight: bold;
}

    pre {
      margin-top: 20px;
      padding: 15px;
      background: #eee;
      border: 1px solid #ccc;
      white-space: pre-wrap;
      font-family: 'Courier New', monospace;
      line-height: 1.3;
    }
    footer {
      font-size: 0.75em;
      color: #666;
      text-align: center;
      margin-top: 20px;
    }

    /* Estilos para sele√ß√£o f√≠sica TX/RX */
    .selecao-container {
      margin-top: 10px;
      border: 1px solid #000000;
      padding: 8px;
      background: #e6e5e5;
      font-family: monospace;
    }
    .selecao-titulo {
      font-weight: bold;
      margin-bottom: 6px;
      user-select: none;
    }
   .botoes-grupo {
  display: flex;
  flex-direction: column; /* empilha verticalmente */
  gap: 6px;
  margin-bottom: 12px;
}
    .botoes-grupo span.label-grupo {
      font-weight: bold;
      margin-right: 10px;
      user-select: none;
      min-width: 80px;
      display: inline-block;
    }

    /* Responsivo */
   @media (max-width: 480px) {
  .form-container {
    border-radius: 0;
    box-shadow: none;
    margin: 0;
    padding: 0 10px 20px 10px;
  }
}

      .botoes-grupo {
        gap: 4px;
      }
      .btn-selecao {
        padding: 5px 8px;
        font-size: 0.85em;
      }
      .botoes-grupo span.label-grupo {
        min-width: 60px;
      }
    }
  </style>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#1976d2" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon_192.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


</head>
<body>
  <div class="form-container">
    <h2>Carimbo Rede Externa</h2>

  <!--  <label for="ta">TA:</label> -->
    <label for="ta"><i class="fa-solid fa-tower-cell"></i> TA:</label>
    <input type="text" id="ta" placeholder="Ex: 344731005" />


    <div class="checkboxes">
  <label><i class="fas fa-signal"></i> <input type="checkbox" id="vivo1" /> VIVO1</label>
  <label><i class="fas fa-signal"></i> <input type="checkbox" id="vivo2" /> VIVO2</label>
</div>



  <label for="tecnicoSelect">üë®üèª‚Äçüîß T√©cnico:</label>
  <select id="tecnicoSelect"></select>
  <input type="text" id="novoTecnico" placeholder="Novo t√©cnico" />
  <hr class="separador" />
  <button onclick="adicionarTecnico()">Adicionar T√©cnico</button>

    <h3>Ponta B</h3>
  <label for="siteSelect"><i class="fas fa-broadcast-tower"></i> Site:</label>
  <select id="siteSelect"></select>
  <input type="text" id="novoSite" placeholder="Novo site Ponta B" />
  <hr class="separador" />
  <button onclick="adicionarSite()">Adicionar Site Ponta B</button>
  <h3>Ponta B - TX F√≠sica e RX F√≠sica</h3>

  <!-- Campo TX F√≠sica -->
  <label for="txFisico">TX: F√≠sica</label>
  <input type="text" id="txFisico" readonly placeholder="Clique nos bot√µes abaixo para preencher" />

  <div class="selecao-container" data-ponta="B" data-campo="txFisico">
   <div class="botoes-grupo">
  <div><span class="label-grupo">Outdoor</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="APM30H">APM30H</button>
    <button type="button" class="btn-selecao" data-value="ARMARIO">Arm√°rio</button>
    <button type="button" class="btn-selecao" data-value="OMIBRA_BT">OMIBRA_BT</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor FILA</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="FL01">01</button>
    <button type="button" class="btn-selecao" data-value="FL02">02</button>
    <button type="button" class="btn-selecao" data-value="FL03">03</button>
    <button type="button" class="btn-selecao" data-value="FL04">04</button>
    <button type="button" class="btn-selecao" data-value="FL05">05</button>
    <button type="button" class="btn-selecao" data-value="FL06">06</button>
    <button type="button" class="btn-selecao" data-value="FLA">A</button>
    <button type="button" class="btn-selecao" data-value="FLB">B</button>
    <button type="button" class="btn-selecao" data-value="FLC">C</button>
    <button type="button" class="btn-selecao" data-value="FLD">D</button>
    <button type="button" class="btn-selecao" data-value="FLE">E</button>
    <button type="button" class="btn-selecao" data-value="FLF">F</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor BT</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="BT01">01</button>
    <button type="button" class="btn-selecao" data-value="BT02">02</button>
    <button type="button" class="btn-selecao" data-value="BT03">03</button>
    <button type="button" class="btn-selecao" data-value="BT04">04</button>
    <button type="button" class="btn-selecao" data-value="BT05">05</button>
    <button type="button" class="btn-selecao" data-value="BT06">06</button>
    <button type="button" class="btn-selecao" data-value="BT07">07</button>
    <button type="button" class="btn-selecao" data-value="BT08">08</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="DGO01">01</button>
    <button type="button" class="btn-selecao" data-value="DGO02">02</button>
    <button type="button" class="btn-selecao" data-value="DGO03">03</button>
    <button type="button" class="btn-selecao" data-value="DGO04">04</button>
    <button type="button" class="btn-selecao" data-value="DGO05">05</button>
    <button type="button" class="btn-selecao" data-value="DGO06">06</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO M√ìDULOS</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="MOD01">01</button>
    <button type="button" class="btn-selecao" data-value="MOD02">02</button>
    <button type="button" class="btn-selecao" data-value="MOD03">03</button>
    <button type="button" class="btn-selecao" data-value="MOD04">04</button>
    <button type="button" class="btn-selecao" data-value="MOD05">05</button>
    <button type="button" class="btn-selecao" data-value="MOD06">06</button>
    <button type="button" class="btn-selecao" data-value="MOD07">07</button>
    <button type="button" class="btn-selecao" data-value="MOD08">08</button>
    <button type="button" class="btn-selecao" data-value="MOD09">09</button>
    <button type="button" class="btn-selecao" data-value="MOD10">10</button>
    <button type="button" class="btn-selecao" data-value="MOD11">11</button>
    <button type="button" class="btn-selecao" data-value="MOD12">12</button>
  </div>
</div>


    <div class="botoes-grupo" style="flex-wrap: wrap;">
      <span class="label-grupo" style="width: 70px;">FIBRAS</span>
      <!-- Fibras 01 a 36 -->
      <div style="display:flex; flex-wrap: wrap; gap: 4px; max-width: 430px;">
      <!-- Generate buttons 01 to 36 -->
      </div>
    </div>
  </div>

  <!-- Campo RX F√≠sica -->
  <label for="rxFisico" style="margin-top:30px;">RX: F√≠sica</label>
  <input type="text" id="rxFisico" readonly placeholder="Clique nos bot√µes abaixo para preencher" />

  <div class="selecao-container" data-ponta="B" data-campo="rxFisico">
<div class="botoes-grupo">
  <div><span class="label-grupo">Outdoor</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="APM30H">APM30H</button>
    <button type="button" class="btn-selecao" data-value="ARMARIO">Arm√°rio</button>
    <button type="button" class="btn-selecao" data-value="OMIBRA_BT">OMIBRA_BT</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor FILA</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="FL01">01</button>
    <button type="button" class="btn-selecao" data-value="FL02">02</button>
    <button type="button" class="btn-selecao" data-value="FL03">03</button>
    <button type="button" class="btn-selecao" data-value="FL04">04</button>
    <button type="button" class="btn-selecao" data-value="FL05">05</button>
    <button type="button" class="btn-selecao" data-value="FL06">06</button>
    <button type="button" class="btn-selecao" data-value="FLA">A</button>
    <button type="button" class="btn-selecao" data-value="FLB">B</button>
    <button type="button" class="btn-selecao" data-value="FLC">C</button>
    <button type="button" class="btn-selecao" data-value="FLD">D</button>
    <button type="button" class="btn-selecao" data-value="FLE">E</button>
    <button type="button" class="btn-selecao" data-value="FLF">F</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor BT</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="BT01">01</button>
    <button type="button" class="btn-selecao" data-value="BT02">02</button>
    <button type="button" class="btn-selecao" data-value="BT03">03</button>
    <button type="button" class="btn-selecao" data-value="BT04">04</button>
    <button type="button" class="btn-selecao" data-value="BT05">05</button>
    <button type="button" class="btn-selecao" data-value="BT06">06</button>
    <button type="button" class="btn-selecao" data-value="BT07">07</button>
    <button type="button" class="btn-selecao" data-value="BT08">08</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="DGO01">01</button>
    <button type="button" class="btn-selecao" data-value="DGO02">02</button>
    <button type="button" class="btn-selecao" data-value="DGO03">03</button>
    <button type="button" class="btn-selecao" data-value="DGO04">04</button>
    <button type="button" class="btn-selecao" data-value="DGO05">05</button>
    <button type="button" class="btn-selecao" data-value="DGO06">06</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO M√ìDULOS</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="MOD01">01</button>
    <button type="button" class="btn-selecao" data-value="MOD02">02</button>
    <button type="button" class="btn-selecao" data-value="MOD03">03</button>
    <button type="button" class="btn-selecao" data-value="MOD04">04</button>
    <button type="button" class="btn-selecao" data-value="MOD05">05</button>
    <button type="button" class="btn-selecao" data-value="MOD06">06</button>
    <button type="button" class="btn-selecao" data-value="MOD07">07</button>
    <button type="button" class="btn-selecao" data-value="MOD08">08</button>
    <button type="button" class="btn-selecao" data-value="MOD09">09</button>
    <button type="button" class="btn-selecao" data-value="MOD10">10</button>
    <button type="button" class="btn-selecao" data-value="MOD11">11</button>
    <button type="button" class="btn-selecao" data-value="MOD12">12</button>
  </div>
</div>

    <div class="botoes-grupo" style="flex-wrap: wrap;">
      <span class="label-grupo" style="width: 70px;">FIBRAS</span>
      <!-- Fibras 01 a 36 -->
      <div style="display:flex; flex-wrap: wrap; gap: 4px; max-width: 430px;">
      <!-- Generate buttons 01 to 36 -->
      </div>
    </div>
  </div>

  <h3>Ponta B - TX Pot√™ncia e RX Pot√™ncia</h3>
<div class="dupla">
  <div>
    <label for="txPotenciaB">TX: Pot√™ncia</label>
    <div class="seletor-potencia">
      <button type="button" onclick="ajustarPotencia(-0.5)" id="btnDownB">‚ñº</button>
      <span id="potenciaDisplay">0.0 dB</span>
      <button type="button" onclick="ajustarPotencia(0.5)" id="btnUpB">‚ñ≤</button>
    </div>
    <input type="hidden" id="txPotenciaB" name="txPotenciaB" value="+10.0 dB" />
  </div>

  <div>
    <label for="rxPotenciaB">RX: Pot√™ncia</label>
    <div class="seletor-potencia">
      <button type="button" onclick="ajustarPotenciaRx(-0.5)" id="btnDownRxB">‚ñº</button>
      <span id="potenciaDisplayRx">0.0 dB</span>
      <button type="button" onclick="ajustarPotenciaRx(0.5)" id="btnUpRxB">‚ñ≤</button>
      <label style="margin-left: 8px;">
        <input type="checkbox" id="lossRxB" onchange="toggleLossRxB()" />
        Loss
      </label>
    </div>
    <input type="hidden" id="rxPotenciaB" name="rxPotenciaB" value="0.0 dB" />
  </div>
</div>


  <h3>Ponta A</h3>
  <label for="siteSelect"><i class="fas fa-broadcast-tower"></i> Site:</label>
  <select id="siteSelectA"></select>
  <input type="text" id="novoSiteA" placeholder="Novo site Ponta A" />
  <hr class="separador" />
  <button onclick="adicionarSiteA()">Adicionar Site Ponta A</button>

  <h3>Ponta A - TX F√≠sica e RX F√≠sica</h3>

  <!-- Campo TX F√≠sica A -->
  <label for="txFisicoA">TX: F√≠sica</label>
  <input type="text" id="txFisicoA" readonly placeholder="Clique nos bot√µes abaixo para preencher" />

  <div class="selecao-container" data-ponta="A" data-campo="txFisicoA">
<div class="botoes-grupo">
  <div><span class="label-grupo">Outdoor</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="APM30H">APM30H</button>
    <button type="button" class="btn-selecao" data-value="ARMARIO">Arm√°rio</button>
    <button type="button" class="btn-selecao" data-value="OMIBRA_BT">OMIBRA_BT</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor FILA</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="FL01">01</button>
    <button type="button" class="btn-selecao" data-value="FL02">02</button>
    <button type="button" class="btn-selecao" data-value="FL03">03</button>
    <button type="button" class="btn-selecao" data-value="FL04">04</button>
    <button type="button" class="btn-selecao" data-value="FL05">05</button>
    <button type="button" class="btn-selecao" data-value="FL06">06</button>
    <button type="button" class="btn-selecao" data-value="FLA">A</button>
    <button type="button" class="btn-selecao" data-value="FLB">B</button>
    <button type="button" class="btn-selecao" data-value="FLC">C</button>
    <button type="button" class="btn-selecao" data-value="FLD">D</button>
    <button type="button" class="btn-selecao" data-value="FLE">E</button>
    <button type="button" class="btn-selecao" data-value="FLF">F</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor BT</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="BT01">01</button>
    <button type="button" class="btn-selecao" data-value="BT02">02</button>
    <button type="button" class="btn-selecao" data-value="BT03">03</button>
    <button type="button" class="btn-selecao" data-value="BT04">04</button>
    <button type="button" class="btn-selecao" data-value="BT05">05</button>
    <button type="button" class="btn-selecao" data-value="BT06">06</button>
    <button type="button" class="btn-selecao" data-value="BT07">07</button>
    <button type="button" class="btn-selecao" data-value="BT08">08</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="DGO01">01</button>
    <button type="button" class="btn-selecao" data-value="DGO02">02</button>
    <button type="button" class="btn-selecao" data-value="DGO03">03</button>
    <button type="button" class="btn-selecao" data-value="DGO04">04</button>
    <button type="button" class="btn-selecao" data-value="DGO05">05</button>
    <button type="button" class="btn-selecao" data-value="DGO06">06</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO M√ìDULOS</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="MOD01">01</button>
    <button type="button" class="btn-selecao" data-value="MOD02">02</button>
    <button type="button" class="btn-selecao" data-value="MOD03">03</button>
    <button type="button" class="btn-selecao" data-value="MOD04">04</button>
    <button type="button" class="btn-selecao" data-value="MOD05">05</button>
    <button type="button" class="btn-selecao" data-value="MOD06">06</button>
    <button type="button" class="btn-selecao" data-value="MOD07">07</button>
    <button type="button" class="btn-selecao" data-value="MOD08">08</button>
    <button type="button" class="btn-selecao" data-value="MOD09">09</button>
    <button type="button" class="btn-selecao" data-value="MOD10">10</button>
    <button type="button" class="btn-selecao" data-value="MOD11">11</button>
    <button type="button" class="btn-selecao" data-value="MOD12">12</button>
  </div>
</div>

    <div class="botoes-grupo" style="flex-wrap: wrap;">
      <span class="label-grupo" style="width: 70px;">FIBRAS</span>
      <!-- Fibras 01 a 36 -->
      <div style="display:flex; flex-wrap: wrap; gap: 4px; max-width: 430px;">
      <!-- Generate buttons 01 to 36 -->
      </div>
    </div>
  </div>

  <!-- Campo RX F√≠sica A -->
  <label for="rxFisicoA" style="margin-top:30px;">RX: F√≠sica</label>
  <input type="text" id="rxFisicoA" readonly placeholder="Clique nos bot√µes abaixo para preencher" />

  <div class="selecao-container" data-ponta="A" data-campo="rxFisicoA">
<div class="botoes-grupo">
  <div><span class="label-grupo">Outdoor</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="APM30H">APM30H</button>
    <button type="button" class="btn-selecao" data-value="ARMARIO">Arm√°rio</button>
    <button type="button" class="btn-selecao" data-value="OMIBRA_BT">OMIBRA_BT</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor FILA</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="FL01">01</button>
    <button type="button" class="btn-selecao" data-value="FL02">02</button>
    <button type="button" class="btn-selecao" data-value="FL03">03</button>
    <button type="button" class="btn-selecao" data-value="FL04">04</button>
    <button type="button" class="btn-selecao" data-value="FL05">05</button>
    <button type="button" class="btn-selecao" data-value="FL06">06</button>
    <button type="button" class="btn-selecao" data-value="FLA">A</button>
    <button type="button" class="btn-selecao" data-value="FLB">B</button>
    <button type="button" class="btn-selecao" data-value="FLC">C</button>
    <button type="button" class="btn-selecao" data-value="FLD">D</button>
    <button type="button" class="btn-selecao" data-value="FLE">E</button>
    <button type="button" class="btn-selecao" data-value="FLF">F</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">Indoor BT</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="BT01">01</button>
    <button type="button" class="btn-selecao" data-value="BT02">02</button>
    <button type="button" class="btn-selecao" data-value="BT03">03</button>
    <button type="button" class="btn-selecao" data-value="BT04">04</button>
    <button type="button" class="btn-selecao" data-value="BT05">05</button>
    <button type="button" class="btn-selecao" data-value="BT06">06</button>
    <button type="button" class="btn-selecao" data-value="BT07">07</button>
    <button type="button" class="btn-selecao" data-value="BT08">08</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="DGO01">01</button>
    <button type="button" class="btn-selecao" data-value="DGO02">02</button>
    <button type="button" class="btn-selecao" data-value="DGO03">03</button>
    <button type="button" class="btn-selecao" data-value="DGO04">04</button>
    <button type="button" class="btn-selecao" data-value="DGO05">05</button>
    <button type="button" class="btn-selecao" data-value="DGO06">06</button>
  </div>
</div>

<div class="botoes-grupo">
  <div><span class="label-grupo">DGO M√ìDULOS</span></div>
  <div>
    <button type="button" class="btn-selecao" data-value="MOD01">01</button>
    <button type="button" class="btn-selecao" data-value="MOD02">02</button>
    <button type="button" class="btn-selecao" data-value="MOD03">03</button>
    <button type="button" class="btn-selecao" data-value="MOD04">04</button>
    <button type="button" class="btn-selecao" data-value="MOD05">05</button>
    <button type="button" class="btn-selecao" data-value="MOD06">06</button>
    <button type="button" class="btn-selecao" data-value="MOD07">07</button>
    <button type="button" class="btn-selecao" data-value="MOD08">08</button>
    <button type="button" class="btn-selecao" data-value="MOD09">09</button>
    <button type="button" class="btn-selecao" data-value="MOD10">10</button>
    <button type="button" class="btn-selecao" data-value="MOD11">11</button>
    <button type="button" class="btn-selecao" data-value="MOD12">12</button>
  </div>
</div>

    <div class="botoes-grupo" style="flex-wrap: wrap;">
      <span class="label-grupo" style="width: 70px;">FIBRAS</span>
      <!-- Fibras 01 a 36 -->
      <div style="display:flex; flex-wrap: wrap; gap: 4px; max-width: 430px;">
      <!-- Generate buttons 01 to 36 -->
      </div>
    </div>
  </div>

 <h3>Ponta A - TX Pot√™ncia e RX Pot√™ncia</h3>
<div class="dupla">
  <div>
    <label for="txPotenciaA">TX: Pot√™ncia</label>
    <div class="seletor-potencia">
      <button type="button" onclick="ajustarPotenciaA(-0.5)">‚ñº</button>
      <span id="potenciaDisplayA">0.0 dB</span>
      <button type="button" onclick="ajustarPotenciaA(0.5)">‚ñ≤</button>
    </div>
    <input type="hidden" id="txPotenciaA" name="txPotenciaA" value="0.0 dB" />
  </div>

  <div>
    <label for="rxPotenciaA">RX: Pot√™ncia</label>
    <div style="display: flex; align-items: center; gap: 8px;">
      <div class="seletor-potencia">
        <button type="button" onclick="ajustarPotenciaRxA(-0.5)" id="btnDownRxA">‚ñº</button>
        <span id="potenciaDisplayRxA">0.0 dB</span>
        <button type="button" onclick="ajustarPotenciaRxA(0.5)" id="btnUpRxA">‚ñ≤</button>
      </div>
      <label style="display: flex; align-items: center; gap: 4px;">
        <input type="checkbox" id="lossRxA" onchange="toggleLossRxA()"> Loss
      </label>
    </div>
    <input type="hidden" id="rxPotenciaA" name="rxPotenciaA" value="0.0 dB" />
  </div>
</div>

  
  
  <h3>Afeta√ß√£o</h3>
  <div class="checkboxes">
    <label><input type="checkbox" id="backboneRegional" onclick="toggleCheckbox('backboneRegional', ['backboneNacional'])" /> Regional</label>
    <label><input type="checkbox" id="backboneNacional" onclick="toggleCheckbox('backboneNacional', ['backboneRegional'])" /> Nacional</label>
  </div>

  <div class="checkboxes">
    <label><input type="checkbox" id="causaRompimento" onclick="toggleCheckbox('causaRompimento', ['causaAtenuacao'])" /> Rompimento</label>
    <label><input type="checkbox" id="causaAtenuacao" onclick="toggleCheckbox('causaAtenuacao', ['causaRompimento'])" /> Atenua√ß√£o</label>
  </div>

  <label for="equipamentoSelect">Nome do equipamento:</label>
  <select id="equipamentoSelect"></select>
  <input type="text" id="novoEquipamento" placeholder="Novo equipamento" />
  <button onclick="adicionarEquipamento()">Adicionar Equipamento</button>

  <label for="numeroCabo">N√∫mero do cabo:</label>
  <input type="text" id="numeroCabo" />

  <label for="contato">Contato:</label>
  <input type="text" id="contato" value="" />

  <label for="obs">OBS:</label>
  <textarea id="obs" rows="3"></textarea>

  <button onclick="gerarCarimbo()">Gerar Carimbo</button>
  
  <pre id="output"></pre>
 
<button id="btnWhatsapp" style="display:none; margin-top: 10px;" onclick="compartilharWhatsapp()">Compartilhar via WhatsApp</button>

</div>

<footer>
  ¬© Desenvolvido por Alexandre Giordan Marafigo
</footer>

<script>
  const chaveTecnicos = 'carimboTecnicos';
  const chaveSitesB = 'carimboSitesPontaB';
  const chaveSitesA = 'carimboSitesPontaA';
  const chaveEquipamentos = 'carimboEquipamentos';

  // Popular selects salvo no localStorage
  function carregarLista(chave) {
    const lista = JSON.parse(localStorage.getItem(chave));
    return Array.isArray(lista) ? lista : [];
  }
  function salvarLista(chave, lista) {
    localStorage.setItem(chave, JSON.stringify(lista));
  }
  function popularSelect(id, lista, placeholderText) {
    const select = document.getElementById(id);
    select.innerHTML = '';
    const placeholderOption = document.createElement('option');
    placeholderOption.value = '';
    placeholderOption.textContent = placeholderText;
    placeholderOption.disabled = true;
    placeholderOption.selected = true;
    select.appendChild(placeholderOption);
    lista.forEach(item => {
      const option = document.createElement('option');
      option.value = item;
      option.textContent = item;
      select.appendChild(option);
    });
  }
  function adicionarItem(chave, inputId, selectId, nomeCampo, placeholderText) {
    const input = document.getElementById(inputId);
    const valor = input.value.trim();
    if (!valor) {
      alert(`Digite o nome do ${nomeCampo} para adicionar.`);
      return;
    }
    let lista = carregarLista(chave);
    if (lista.includes(valor)) {
      alert(`${nomeCampo} j√° est√° na lista.`);
      input.value = '';
      return;
    }
    lista.push(valor);
    salvarLista(chave, lista);
    popularSelect(selectId, lista, placeholderText);
    document.getElementById(selectId).value = valor;
    input.value = '';
    alert(`${nomeCampo} "${valor}" adicionado.`);
  }
  function adicionarTecnico() {
    adicionarItem(chaveTecnicos, 'novoTecnico', 'tecnicoSelect', 'T√©cnico', 'Selecione o t√©cnico');
  }
  function adicionarSite() {
    adicionarItem(chaveSitesB, 'novoSite', 'siteSelect', 'Site Ponta B', 'Selecione o site Ponta B');
  }
  function adicionarSiteA() {
    adicionarItem(chaveSitesA, 'novoSiteA', 'siteSelectA', 'Site Ponta A', 'Selecione o site Ponta A');
  }
  function adicionarEquipamento() {
    adicionarItem(chaveEquipamentos, 'novoEquipamento', 'equipamentoSelect', 'Equipamento', 'Selecione o equipamento');
  }

  function toggleCheckbox(idChecked, others) {
    others.forEach(id => {
      if (id !== idChecked) {
        document.getElementById(id).checked = false;
      }
    });
    const cb = document.getElementById(idChecked);
    if (!cb.checked) cb.checked = true;
  }

  // Gera os bot√µes de fibras 01 a 36 para cada container de fibras
  function gerarBotoesFibras() {
    const fibrasContainers = document.querySelectorAll('.botoes-grupo > div[style*="max-width"]');
    fibrasContainers.forEach(container => {
      if (container.children.length > 0) return; // j√° gerado
      for (let i = 1; i <= 36; i++) {
        let num = i.toString().padStart(2, '0');
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'btn-selecao';
        btn.dataset.value = 'F' + num;
        btn.textContent = num;
        container.appendChild(btn);
      }
    });
  }

  // Manuseio dos cliques nos bot√µes de sele√ß√£o para preencher TX/RX F√≠sica
  document.body.addEventListener('click', e => {
    if (!e.target.classList.contains('btn-selecao')) return;
    const btn = e.target;
    const container = btn.closest('.selecao-container');
    if (!container) return;

    const campoId = container.dataset.campo;
    const input = document.getElementById(campoId);
    if (!input) return;

    // Pegamos o valor do bot√£o clicado
    const valor = btn.dataset.value;

    // Se j√° tem valor no input, adiciona com barra /, se n√£o, s√≥ coloca
    // Evitar repeti√ß√£o do mesmo segmento
    const valoresAtuais = input.value.split('/').filter(v => v.trim() !== '');

    // Se bot√£o j√° est√° ativo, desativa (remove do input)
    if (btn.classList.contains('active')) {
      // remover do array valoresAtuais
      const novosValores = valoresAtuais.filter(v => v !== valor);
      input.value = novosValores.join('/');
      btn.classList.remove('active');
    } else {
      // adiciona no final
      valoresAtuais.push(valor);
      input.value = valoresAtuais.join('/');
      btn.classList.add('active');
    }
  });  
 let potenciaAtual = 0.0;

function ajustarPotencia(delta) {
  potenciaAtual = Math.round((potenciaAtual + delta) * 2) / 2;
  if (potenciaAtual > 10) potenciaAtual = 10;
  if (potenciaAtual < -30) potenciaAtual = -30;

  const unidade = potenciaAtual > 0 ? 'dB' : 'dBm';
  const valor = (potenciaAtual > 0 ? '+' : '') + potenciaAtual.toFixed(1) + ' ' + unidade;

  document.getElementById('potenciaDisplay').innerText = valor;
  document.getElementById('txPotenciaB').value = valor;
}

let potenciaRx = 0.0;

function ajustarPotenciaRx(delta) {
  const checkbox = document.getElementById('lossRxB');
  if (checkbox && checkbox.checked) return;

  potenciaRx = Math.round((potenciaRx + delta) * 2) / 2;
  if (potenciaRx > 10) potenciaRx = 10;
  if (potenciaRx < -30) potenciaRx = -30;

  const unidade = potenciaRx > 0 ? 'dB' : 'dBm';
  const valor = (potenciaRx > 0 ? '+' : '') + potenciaRx.toFixed(1) + ' ' + unidade;

  document.getElementById('potenciaDisplayRx').innerText = valor;
  document.getElementById('rxPotenciaB').value = valor;
}

function toggleLossRxB() {
  const checkbox = document.getElementById('lossRxB');
  const span = document.getElementById('potenciaDisplayRx');
  const input = document.getElementById('rxPotenciaB');
  const btnUp = document.getElementById('btnUpRxB');
  const btnDown = document.getElementById('btnDownRxB');

  if (checkbox.checked) {
    span.innerText = 'Loss';
    input.value = 'Loss';
    btnUp.disabled = true;
    btnDown.disabled = true;
  } else {
    ajustarPotenciaRx(0); // restaura valor
    btnUp.disabled = false;
    btnDown.disabled = false;
  }
}

let potenciaAtualA = 0.0;

function ajustarPotenciaA(delta) {
  potenciaAtualA = Math.round((potenciaAtualA + delta) * 2) / 2;
  if (potenciaAtualA > 10) potenciaAtualA = 10;
  if (potenciaAtualA < -30) potenciaAtualA = -30;

  const unidade = potenciaAtualA > 0 ? 'dB' : 'dBm';
  const valor = (potenciaAtualA > 0 ? '+' : '') + potenciaAtualA.toFixed(1) + ' ' + unidade;

  document.getElementById('potenciaDisplayA').innerText = valor;
  document.getElementById('txPotenciaA').value = valor;
}

let potenciaRxA = 0.0;

function ajustarPotenciaRxA(delta) {
  const checkbox = document.getElementById('lossRxA');
  if (checkbox && checkbox.checked) return;

  potenciaRxA = Math.round((potenciaRxA + delta) * 2) / 2;
  if (potenciaRxA > 10) potenciaRxA = 10;
  if (potenciaRxA < -30) potenciaRxA = -30;

  const unidade = potenciaRxA > 0 ? 'dB' : 'dBm';
  const valor = (potenciaRxA > 0 ? '+' : '') + potenciaRxA.toFixed(1) + ' ' + unidade;

  document.getElementById('potenciaDisplayRxA').innerText = valor;
  document.getElementById('rxPotenciaA').value = valor;
}

function toggleLossRxA() {
  const checkbox = document.getElementById('lossRxA');
  const span = document.getElementById('potenciaDisplayRxA');
  const input = document.getElementById('rxPotenciaA');
  const btnUp = document.getElementById('btnUpRxA');
  const btnDown = document.getElementById('btnDownRxA');

  if (checkbox.checked) {
    span.innerText = 'Loss';
    input.value = 'Loss';
    btnUp.disabled = true;
    btnDown.disabled = true;
  } else {
    ajustarPotenciaRxA(0); // restaura valor
    btnUp.disabled = false;
    btnDown.disabled = false;
  }
}


  

  // Sincroniza o estado dos bot√µes ao preencher manualmente o input (se for edit√°vel)
  // (Neste caso o input √© readonly, ent√£o n√£o precisa)

  // Ao limpar o campo, resetar os bot√µes ativos (quando limpar o campo manualmente, se implementar)
  // Como input readonly, a limpeza ser√° manual via reset do form (n√£o implementado)

  function gerarCarimbo() {
    const ta = document.getElementById('ta').value.trim();
    const vivo1 = document.getElementById('vivo1').checked ? '( X ) VIVO1' : '( ) VIVO1';
    const vivo2 = document.getElementById('vivo2').checked ? '( X ) VIVO2' : '( ) VIVO2';
    const tecnico = document.getElementById('tecnicoSelect').value.trim();
    const siteB = document.getElementById('siteSelect').value.trim();
    const txFisicoB = document.getElementById('txFisico').value.trim();
    const txPotenciaB = document.getElementById('txPotenciaB').value.trim();
    const rxFisicoB = document.getElementById('rxFisico').value.trim();
    const rxPotenciaB = document.getElementById('rxPotenciaB').value.trim();
    const siteA = document.getElementById('siteSelectA').value.trim();
    const txFisicoA = document.getElementById('txFisicoA').value.trim();
    const txPotenciaA = document.getElementById('txPotenciaA').value.trim();
    const rxFisicoA = document.getElementById('rxFisicoA').value.trim();
    const rxPotenciaA = document.getElementById('rxPotenciaA').value.trim();
    const backboneRegional = document.getElementById('backboneRegional').checked;
    const backboneNacional = document.getElementById('backboneNacional').checked;
    const causaRompimento = document.getElementById('causaRompimento').checked;
    const causaAtenuacao = document.getElementById('causaAtenuacao').checked;
    const nomeEquipamento = document.getElementById('equipamentoSelect').value.trim();
    const numeroCabo = document.getElementById('numeroCabo').value.trim();
    const contato = document.getElementById('contato').value.trim();
    const obs = document.getElementById('obs').value.trim();

    if (!ta) return alert('Preencha o campo TA');
    if (!document.getElementById('vivo1').checked && !document.getElementById('vivo2').checked) return alert('Selecione pelo menos uma REDE (VIVO1 ou VIVO2)');
    if (!tecnico) return alert('Selecione o t√©cnico');
    if (!siteB || !txFisicoB || !txPotenciaB || !rxFisicoB || !rxPotenciaB) return alert('Preencha todos os campos da Ponta B');
    if (!siteA || !txFisicoA || !txPotenciaA || !rxFisicoA || !rxPotenciaA) return alert('Preencha todos os campos da Ponta A');
    if (!nomeEquipamento) return alert('Preencha o nome do equipamento');
    // Se n√£o quiser obrigar cabo, comente a linha abaixo:
    // if (!numeroCabo) return alert('Preencha o n√∫mero do cabo');
    if (!contato) return alert('Preencha o contato');
    if (!backboneRegional && !backboneNacional) return alert('Selecione uma op√ß√£o para Backbone');
    if (!causaRompimento && !causaAtenuacao) return alert('Selecione uma op√ß√£o para Causa');

    const texto = `CARIMBO REDE EXTERNA                                    =============================================
    
    
TA: ${ta}

REDE: ${vivo1} ${vivo2}

Ponta B: ${siteB}
POSI√á√ïES SALA DE TRANSMISS√ÉO/DGO:
TX: ${txFisicoB}     TX: ${txPotenciaB}
RX: ${rxFisicoB}     RX: ${rxPotenciaB}

Ponta A: ${siteA}
POSI√á√ïES SALA DE TRANSMISS√ÉO/DGO:
TX: ${txFisicoA}     TX: ${txPotenciaA}
RX: ${rxFisicoA}     RX: ${rxPotenciaA}

Afeta√ß√£o:
Backbone: ${backboneRegional ? '(X) Regional' : '( ) Regional'} ${backboneNacional ? '(X) Nacional' : '( ) Nacional'}
Causa: ${causaRompimento ? '(x) Rompimento' : '( ) Rompimento'} ${causaAtenuacao ? '(x) Atenua√ß√£o' : '( ) Atenua√ß√£o'}
Nome do equipamento: ${nomeEquipamento}
N√∫mero do cabo: ${numeroCabo}
T√©cnico: ${tecnico}
Contato: ${contato}
OBS: ${obs}`;

    document.getElementById('output').textContent = texto;
    document.getElementById('btnWhatsapp').style.display = 'inline-block';

    setTimeout(() => {
      const campos = document.querySelectorAll('input[type=text], textarea, select');
      campos.forEach(campo => {
        if (campo.tagName === 'SELECT') campo.selectedIndex = 0;
        else if (campo.id !== 'contato') campo.value = '';
      });
      // reset checkboxes
      document.getElementById('vivo1').checked = false;
      document.getElementById('vivo2').checked = false;
      document.getElementById('backboneRegional').checked = false;
      document.getElementById('backboneNacional').checked = false;
      document.getElementById('causaRompimento').checked = false;
      document.getElementById('causaAtenuacao').checked = false;
      
      // reset bot√µes ativos
      document.querySelectorAll('.btn-selecao.active').forEach(btn => btn.classList.remove('active'));
    }, 6000);
  }

  window.onload = () => {
    popularSelect('tecnicoSelect', carregarLista(chaveTecnicos), 'Selecione o t√©cnico');
    popularSelect('siteSelect', carregarLista(chaveSitesB), 'Selecione o site Ponta B');
    popularSelect('siteSelectA', carregarLista(chaveSitesA), 'Selecione o site Ponta A');
    popularSelect('equipamentoSelect', carregarLista(chaveEquipamentos), 'Selecione o equipamento');
    gerarBotoesFibras();
  };
  function compartilharWhatsapp() {
  const texto = document.getElementById('output').textContent;
  if (!texto) {
    alert('Nada para compartilhar!');
    return;
  }

  const mensagem = encodeURIComponent(texto);
  const link = `https://wa.me/?text=${mensagem}`;
  window.open(link, '_blank');
}
// Registro do Service Worker para funcionamento offline
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(reg => console.log('Service Worker registrado:', reg.scope))
      .catch(err => console.error('Erro ao registrar o Service Worker:', err));
  }
</script>
</body>
</html>
